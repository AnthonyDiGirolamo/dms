<h1>Sign up as a new user</h1>
<% @user.password = @user.password_confirmation = nil %>

<%# error_messages_for :user %>

<% form_for :user, :url => users_path do |f| -%>

<%# Name and error message %>
<% no_error = @user.errors['name'].nil? -%>
<p>
  <% if no_error -%>
    <p class="input_title">
  <% else -%>
    <p class="input_title inline">
  <% end -%>
  <%= label_tag 'name', 'Full Name' %></p>
  <%= error_message_on 'user', 'name', :css_class => "input_error_message" %>
</p>

<%# Field with check or error icon %>
<p>
  <% if no_error and !@user.errors.empty? -%> 
  <div class="valid_field"><%= f.text_field :name, :class => 'input_field' %></div>
  <% else -%>
  <%= f.text_field :name, :class => 'input_field' %>
  <% end -%>
</p>

<%# Name and error message %>
<% no_error = @user.errors['login'].nil? -%>
<p>
  <% if no_error -%>
    <p class="input_title">
  <% else -%>
    <p class="input_title inline">
  <% end -%>
  <%= label_tag 'login', 'Login' %></p>
  <%= error_message_on 'user', 'login', :css_class => "input_error_message" %>
</p>

<%# Field with check or error icon %>
<p>
  <% if no_error and !@user.errors.empty? -%> 
  <div class="valid_field"><%= f.text_field :login, :class => 'input_field' %></div>
  <% else -%>
  <%= f.text_field :login, :class => 'input_field' %>
  <% end -%>
</p>

<%# Name and error message %>
<% no_error = @user.errors['email'].nil? -%>
<p>
  <% if no_error -%>
    <p class="input_title">
  <% else -%>
    <p class="input_title inline">
  <% end -%>
  <%= label_tag 'email', 'Valid Email Address' %></p>
  <%= error_message_on 'user', 'email', :css_class => "input_error_message" %>
</p>

<%# Field with check or error icon %>
<p>
  <% if no_error and !@user.errors.empty? -%> 
  <div class="valid_field"><%= f.text_field :email, :class => 'input_field' %></div>
  <% else -%>
  <%= f.text_field :email, :class => 'input_field' %>
  <% end -%>
</p>

<%# Name and error message %>
<% no_error = @user.errors['password'].nil? -%>
<p>
  <% if no_error -%>
    <p class="input_title">
  <% else -%>
    <p class="input_title inline">
  <% end -%>
  <%= label_tag 'password' %></p>
  <%= error_message_on 'user', 'password', :css_class => "input_error_message" %>
</p>

<p>
  <% if no_error and !@user.errors.empty? -%> 
    <div class="valid_field"><%= f.password_field :password, :class => 'input_field' %></div>
  <% else -%>
    <%= f.password_field :password, :class => 'input_field' %> 
  <% end -%>
</p>

<%# Name and error message %>
<% no_error = @user.errors['password_confirmation'].nil? -%>
<p>
  <% if no_error -%>
    <p class="input_title">
  <% else -%>
    <p class="input_title inline">
  <% end -%>
  <%= label_tag 'password_confirmation', 'Password Confirmation' %></p>
  <%= error_message_on 'user', 'password_confirmation', :css_class => "input_error_message" %>
</p>

<p>
  <% if no_error and !@user.errors.empty? -%> 
    <div class="valid_field"><%= f.password_field :password_confirmation, :class => 'input_field' %></div>
  <% else -%>
    <%= f.password_field :password_confirmation, :class => 'input_field' %> 
  <% end -%>
</p>

<%# Time Zone %>

<p>
  <p class="input_title"><%= label_tag 'time_zone', 'Time Zone' %></p>
  <%= f.time_zone_select :time_zone,  ActiveSupport::TimeZone.us_zones %>
</p>

<p>
  <p class="input_title">Role</p>
  <% for role in @roles %>
    <% if role.name == "employee" %>
      <%= radio_button "role", "name", role.name, :checked => true %>
    <% else %>
      <%= radio_button "role", "name", role.name %>
    <% end %>
    <%= h role.name.humanize %><br/>
  <% end %>
</p>

<p>
  <p class="input_title">Department</p>
  <% for department in @departments %>
    <% if department == @departments.first %>
      <%= radio_button "department", "name", department.name, :checked => true %>
    <% else %>
      <%= radio_button "department", "name", department.name %>
    <% end %>
    <%= h department.name %><br/>
  <% end %>
</p>

<p><%= submit_tag 'Sign up' %></p>
<% end -%>
